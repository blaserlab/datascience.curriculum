<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="datascience.curriculum">
<title>Week 2:  R Fundamentals • datascience.curriculum</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Week 2:  R Fundamentals">
<meta property="og:description" content="datascience.curriculum">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datascience.curriculum</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/week_1.html">Week 1:  Setting Up</a>
    <a class="dropdown-item" href="../articles/week_2.html">Week 2:  R Fundamentals</a>
    <a class="dropdown-item" href="../articles/week_3.html">Week 3:  Next Level R</a>
    <a class="dropdown-item" href="../articles/week_6.html">Week 6:  Packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Week 2:  R Fundamentals</h1>
            
      
      
      <div class="d-none name"><code>week_2.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Today we discuss fundamentals of working with data in R.</p>
<p>There is always more than one way to accomplish the task of reading,
analyzing and plotting data. My perspective is that this should be
accomplished with computer code that is easy to read and
error-resistant. In my opinion, the “tidyverse” family of packages
achieve this goal moreso than “base” R functions or other packages a
large percentage of the time. So I will mostly show you the tidyverse
way.</p>
</div>
<div class="section level2">
<h2 id="data-formatting">Data formatting<a class="anchor" aria-label="anchor" href="#data-formatting"></a>
</h2>
<p>The best way to make the coding easy is to start by formatting your
data in a proper way.</p>
<p>There is <a href="https://en.wikipedia.org/wiki/Database_normalization" class="external-link">theory</a>
on this if you are interested. In short your data should:</p>
<ul>
<li>be in a flat text file format, such as .csv (comma separated
values), .tsv (tab separated values) or .txt (plain text). The file
extensions don’t matter for R; they only affect which program reads your
file on mac or PC. Unlike excel files, these files can be tracked by git
so you know if any changes have been made accidentally.</li>
<li>each row represents an observation</li>
<li>each column represents a variable or attribute for that
observation</li>
<li>each column should be a single specific “type”: numeric, integer,
factor and character are the most common types we use<br>
</li>
<li>each row has a unique “key”. The key can be a single column or a
combination of columns as long as it distinguishes each row from every
other row.</li>
</ul>
</div>
<div class="section level2">
<h2 id="input-and-data-types">Input and data types<a class="anchor" aria-label="anchor" href="#input-and-data-types"></a>
</h2>
<p>Data should exist as a fixed, unchanging file on your hard drive. You
want to read it into R using <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code>. This is a
tidyverse command that reads the file, automatically infers data types,
and formats the data as a “tibble”. A tibble is related to the dataframe
from base R but has superior characteristics for almost everything we
do. Think of it as a programmatic representation of your csv file within
R.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># attach the packages we will need</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org" class="external-link">"tidyverse"</a></span><span class="op">)</span></span>
<span><span class="co"># read in an example data file</span></span>
<span><span class="co"># or substitute a file path to your own data</span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/blaserlab/datascience.curriculum/main/inst/extdata/demo_iris_data.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 6</span></span></span>
<span><span class="co">#&gt;    observation Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>           1          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>           2          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>           3          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>           4          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>           5          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>           6          5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>           7          4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>           8          5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>           9          4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          10          4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span></code></pre></div>
<p>These data are from a collection of sample datasets provided with R.
As provided, it lacks a useful “key” column, so I added the observation
column in the first position. The data indicate measurements for various
species of iris flower.</p>
<p>When read into R, the read_csv command infers the data types from the
values provided and provides a message for you explaining what it has
done. In this case, they are all correct except for observation. Why?
Because it has interpreted observation as “dbl” which is another way of
saying “numeric” which in this case is not really correct. Observation
is just a serial number of the observations which in this case have an
inherent order but not a quantitative value. So we can tell R to
interpret this as a factor which is the R data type for ordered
data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/blaserlab/datascience.curriculum/main/inst/extdata/demo_iris_data.csv"</span>, col_types <span class="op">=</span> <span class="st">"fddddc"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 6</span></span></span>
<span><span class="co">#&gt;    observation Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1                    5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2                    4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3                    4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4                    4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5                    5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6                    5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7                    4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8                    5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9                    4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10                   4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span></code></pre></div>
<p>The string “fddddc” tells R to interpret the columns as “factor”,
“double” or “character”.</p>
<p><strong>You should always check that the data types are correct when
you import your data in order to prevent errors.</strong></p>
<div class="section level3">
<h3 id="more-on-data-types">More on data types<a class="anchor" aria-label="anchor" href="#more-on-data-types"></a>
</h3>
<ul>
<li>character: any string of valid alphanumeric characters. Carries no
order or quantitative value besides “alphanumeric” order</li>
<li>numeric/double: any real number</li>
<li>integer: any integer, a subset of the real numbers</li>
<li>factor: factors are essentially characters bound to integer values.
The character part is called a “level”. Factors can be a little tricky
but are useful for ordering and reordering categorical data.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="variable-assignment">Variable assignment<a class="anchor" aria-label="anchor" href="#variable-assignment"></a>
</h2>
<p>An important advantage of using a programming language to analyze
data is the concept of abstraction, or assigning complicated values to
simple variable names.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># assign the data to the variable, demo_data</span></span>
<span><span class="co"># readr::read_csv(file = system.file("extdata/demo_iris_data.csv", package = "datascience.curriculum"))</span></span>
<span><span class="va">demo_data</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/blaserlab/datascience.curriculum/main/inst/extdata/demo_iris_data.csv"</span>, col_types <span class="op">=</span> <span class="st">"fddddc"</span><span class="op">)</span></span>
<span><span class="va">demo_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 6</span></span></span>
<span><span class="co">#&gt;    observation Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1                    5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2                    4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3                    4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4                    4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5                    5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6                    5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7                    4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8                    5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9                    4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10                   4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span></code></pre></div>
<p>The left arrow operator stores the data in the global environment
under the name “demo_data”.</p>
<p>Any valid R object (data, functions etc) can be stored under a
variable name. By default they will be stored in the global environment.
If you save something else with the same name in the same environment it
will overwrite the old value without checking, asking or notifying
you.</p>
</div>
<div class="section level2">
<h2 id="data-structures">Data structures<a class="anchor" aria-label="anchor" href="#data-structures"></a>
</h2>
<p>Dataframes and tibbles are essentially lists of vectors with some
rules attached. So what are lists and vectors?</p>
<p>A vector is the fundamental data structure in R. It is a collection
of data values, all of which must be the same data type.</p>
<p>You can make your own vector directly in R like so:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a numeric vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1 2 3</span></span>
<span></span>
<span><span class="co"># a character vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "a" "b" "c"</span></span>
<span></span>
<span><span class="co"># another character vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"b"</span> ,<span class="st">"charlie"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1"       "b"       "charlie"</span></span>
<span></span>
<span><span class="co"># here 1 gets coerced to a character because a vector must be all the same type</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"b"</span>, <span class="st">"charlie"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1"       "b"       "charlie"</span></span></code></pre></div>
<p>In a dataframe or a tibble, each column is a vector.</p>
<p>We can use some R operators to extract the columns as vectors.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract a column by position</span></span>
<span><span class="co"># the head command prints the first few values only</span></span>
<span><span class="co"># omit head() if you want the whole thing</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">demo_data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5.1 4.9 4.7 4.6 5.0 5.4</span></span>
<span></span>
<span><span class="co"># extract a column by name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">demo_data</span><span class="op">[[</span><span class="st">"Species"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "setosa" "setosa" "setosa" "setosa" "setosa" "setosa"</span></span>
<span></span>
<span><span class="co"># another way to extract a column by name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">demo_data</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "setosa" "setosa" "setosa" "setosa" "setosa" "setosa"</span></span></code></pre></div>
<p>Usually you want to use the <code>$</code> operator to extract a
column by name.</p>
<p>A list is a more general form of data object. It can hold any
combination of R data types. This is how you make a list:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make the list</span></span>
<span><span class="va">demo_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"b"</span>, <span class="st">"charlie"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">demo_list</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] "b"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] "charlie"</span></span>
<span></span>
<span><span class="co"># optionally name the elements</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">demo_list</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a_number"</span>, <span class="st">"a_letter"</span>, <span class="st">"a_name"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract the elements by name</span></span>
<span><span class="va">demo_list</span><span class="op">$</span><span class="va">a_number</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="va">demo_list</span><span class="op">$</span><span class="va">a_letter</span></span>
<span><span class="co">#&gt; [1] "b"</span></span>
<span><span class="va">demo_list</span><span class="op">$</span><span class="va">a_name</span></span>
<span><span class="co">#&gt; [1] "charlie"</span></span></code></pre></div>
<p>Lists are very flexible and useful objects for holding your data.</p>
</div>
<div class="section level2">
<h2 id="subsetting-with-base-r-functions">Subsetting with base R functions<a class="anchor" aria-label="anchor" href="#subsetting-with-base-r-functions"></a>
</h2>
<p>I think this syntax is suboptimal compared to Dplyr syntax, but for
some advanced data objects you need to know it.</p>
<p>For subsetting you use a single bracket rather than the double
bracket for extracting data. This returns an object of the same class,
only smaller.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># subset using dataframe[row,colum] syntax</span></span>
<span><span class="co"># subset a dataframe to get the second and third columns only</span></span>
<span><span class="va">demo_data</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 2</span></span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          5.1         3.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          4.9         3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          4.7         3.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          4.6         3.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          5           3.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          5.4         3.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          4.6         3.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          5           3.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          4.4         2.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          4.9         3.1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span>
<span></span>
<span><span class="co"># subset a dataframe to get the first and second rows only</span></span>
<span><span class="va">demo_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">#&gt;   observation Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1                    5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2                    4.9         3            1.4         0.2 setosa</span></span>
<span></span>
<span><span class="co"># subset to include columns by name </span></span>
<span><span class="va">demo_data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span>, <span class="st">"observation"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 2</span></span></span>
<span><span class="co">#&gt;    Species observation</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> setosa  1          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> setosa  2          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> setosa  3          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> setosa  4          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> setosa  5          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> setosa  6          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> setosa  7          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> setosa  8          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> setosa  9          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> setosa  10         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span>
<span></span>
<span><span class="co"># subset a list to return a smaller list</span></span>
<span><span class="co"># return the first two elements</span></span>
<span><span class="va">demo_list</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; $a_number</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $a_letter</span></span>
<span><span class="co">#&gt; [1] "b"</span></span>
<span></span>
<span><span class="co"># subset a list by name</span></span>
<span><span class="va">demo_list</span><span class="op">[</span><span class="st">"a_name"</span><span class="op">]</span></span>
<span><span class="co">#&gt; $a_name</span></span>
<span><span class="co">#&gt; [1] "charlie"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-operations">Data operations<a class="anchor" aria-label="anchor" href="#data-operations"></a>
</h2>
<p>In R the fundamental data structure is a vector. A single value is a
vector of length 1. Many functions are optimized to work on the entire
vector at once.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the mean of the sepal length</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">demo_data</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5.843333</span></span>
<span></span>
<span><span class="co"># add two vectors</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3 5</span></span>
<span></span>
<span><span class="co"># for vectors of unequal length, the smaller vector is "recycled" for each element of the larger vector</span></span>
<span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2 3 4</span></span>
<span></span>
<span><span class="co"># this gives a warning if the recycling doesn't work out evenly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in c(1, 2) + c(1, 2, 3): longer object length is not a multiple of</span></span>
<span><span class="co">#&gt; shorter object length</span></span>
<span><span class="co">#&gt; [1] 2 4 4</span></span></code></pre></div>
<p>You can read more about arithmetic and logical operators <a href="https://www.statmethods.net/management/operators.html" class="external-link">here</a>.</p>
<p>Logical operators return a value of TRUE or FALSE.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fl">2</span> <span class="op">==</span> <span class="fl">2</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fl">1</span> <span class="op">!=</span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fl">2</span> <span class="op">&lt;=</span> <span class="fl">1</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="st">"apple"</span> <span class="op">==</span> <span class="st">"banana"</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="dplyr">Dplyr<a class="anchor" aria-label="anchor" href="#dplyr"></a>
</h2>
<p>Dplyr is a part of the tidyverse packages. This is what you will use
for data transformations prior to statistical testing or plotting.</p>
<p>Dplyr functions are pipe-friendly, meaning that they can be chained
in a way that reduces redundant text in your code or saving intermediate
values which can cause problems. For this you use the pipe operator
<code>%&gt;%</code> or <code>|&gt;</code>. The latter is a new version
which I find preferable but requires R version 4.1 or later. Either will
work for all of the code we demonstrate here.</p>
<p>Dplyr functions are also vectorized so they are computationally
efficient and can be used on tables with hundreds of thousands of
rows.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a new column with mutate</span></span>
<span><span class="co"># then group by a useful categorical variable</span></span>
<span><span class="co"># then summarize the new value we calculated by mean according to group</span></span>
<span><span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sepal_l_w <span class="op">=</span> <span class="va">Sepal.Length</span> <span class="op">+</span> <span class="va">Sepal.Width</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_sepal_l_w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">sepal_l_w</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   Species    mean_sepal_l_w</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa               8.43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor           8.71</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica            9.56</span></span></code></pre></div>
<p>You can use any built-in or custom function in mutate or summarise.
Functions for mutate must return a vector of the same length as the
input vector; functions for summarise must return a vector of length
1.</p>
<p>Sometimes you may find it useful to select or de-select columns from
a tibble:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># return a tibble without the observation column</span></span>
<span><span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">observation</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 5</span></span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span>
<span><span class="co"># return a tibble with only the Species and Sepal.Length columns</span></span>
<span><span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Species</span>, <span class="va">Sepal.Length</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 2</span></span></span>
<span><span class="co">#&gt;    Species Sepal.Length</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> setosa           5.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> setosa           4.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> setosa           4.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> setosa           4.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> setosa           5  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> setosa           5.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> setosa           4.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> setosa           5  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> setosa           4.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> setosa           4.9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span></code></pre></div>
<p>Use <code>filter</code> to select rows based on conditional
test(s):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter rows satisfying a logical test</span></span>
<span><span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">==</span> <span class="st">"setosa"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 50 × 6</span></span></span>
<span><span class="co">#&gt;    observation Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1                    5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2                    4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3                    4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4                    4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5                    5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6                    5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7                    4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8                    5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9                    4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10                   4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 40 more rows</span></span></span>
<span></span>
<span><span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 6</span></span></span>
<span><span class="co">#&gt;    observation Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1                    5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2                    4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3                    4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4                    4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5                    5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6                    5.4         3.9          1.7         0.4 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7                    4.6         3.4          1.4         0.3 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8                    5           3.4          1.5         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9                    4.4         2.9          1.4         0.2 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10                   4.9         3.1          1.5         0.1 setosa </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 90 more rows</span></span></span></code></pre></div>
<p>In some cases it may be useful to have the data in “long form” as
opposed to “wide form”. Here you use <code>pivot_longer</code> and you
are going to tell R which columns to convert to long form. These should
all be of the same type because they will end up in the same column. The
selected column names get repeated in a “name” column and the values end
up in a “value” column. The columns you don’t select will be retained as
additional attributes for the values.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pivot from wide form to long form</span></span>
<span><span class="va">long_data</span> <span class="op">&lt;-</span> <span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Sepal.Length</span>,  <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, <span class="va">Petal.Width</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">long_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 600 × 4</span></span></span>
<span><span class="co">#&gt;    observation Species name         value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1           setosa  Sepal.Length   5.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1           setosa  Sepal.Width    3.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1           setosa  Petal.Length   1.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1           setosa  Petal.Width    0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2           setosa  Sepal.Length   4.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2           setosa  Sepal.Width    3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2           setosa  Petal.Length   1.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2           setosa  Petal.Width    0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 3           setosa  Sepal.Length   4.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 3           setosa  Sepal.Width    3.2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 590 more rows</span></span></span>
<span></span>
<span><span class="co"># pivot back to wide form</span></span>
<span><span class="va">long_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"name"</span>, values_from <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 6</span></span></span>
<span><span class="co">#&gt;    observation Species Sepal.Length Sepal.Width Petal.Length Petal.Width</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1           setosa           5.1         3.5          1.4         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2           setosa           4.9         3            1.4         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3           setosa           4.7         3.2          1.3         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4           setosa           4.6         3.1          1.5         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5           setosa           5           3.6          1.4         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6           setosa           5.4         3.9          1.7         0.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7           setosa           4.6         3.4          1.4         0.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8           setosa           5           3.4          1.5         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9           setosa           4.4         2.9          1.4         0.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10          setosa           4.9         3.1          1.5         0.1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></span></code></pre></div>
<p>Sometimes you have two tibbles with related information you want to
join together. This is a powerful tool for adding new attributes onto
existing data.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make two smaller tables</span></span>
<span><span class="va">sepal_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_sepal_l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span>, mean_sepal_w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Sepal.Width</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sepal_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Species    mean_sepal_l mean_sepal_w</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa             5.01         3.43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor         5.94         2.77</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica          6.59         2.97</span></span>
<span></span>
<span><span class="va">petal_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">demo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_petal_l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Petal.Length</span><span class="op">)</span>, mean_petal_w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Petal.Width</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">petal_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   Species    mean_petal_l mean_petal_w</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa             1.46        0.246</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor         4.26        1.33 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica          5.55        2.03</span></span>
<span></span>
<span><span class="co"># now join them back together</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">sepal_data</span>, <span class="va">petal_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#&gt;   Species    mean_sepal_l mean_sepal_w mean_petal_l mean_petal_w</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa             5.01         3.43         1.46        0.246</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor         5.94         2.77         4.26        1.33 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica          6.59         2.97         5.55        2.03</span></span></code></pre></div>
<p>Some rules for joining:</p>
<ul>
<li>you must have at least 1 column with common values to join by. It is
better if you have 1 and only 1. The easiest way to do this is make sure
that this column has the same name in both tables.</li>
<li>you should avoid duplicated values in either of the tables you want
to join. Usually you want to keep the “main” data table the same and add
on new data. If the new data has duplicate entries it will be duplicated
in the output which may cause problems.</li>
<li>missing data will be filled in with NA which is usually OK. The
order of the data in the two tables doesn’t matter. For
<code>left_join(x, y)</code> the order of the data in the resulting
tibble will be the same as for x with the exception of possible
duplications.</li>
<li>always check to be sure your join worked OK</li>
</ul>
<p>For more information on these operations see this useful <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="external-link">cheat
sheet</a>.</p>
</div>
<div class="section level2">
<h2 id="exercises">Exercises<a class="anchor" aria-label="anchor" href="#exercises"></a>
</h2>
<ul>
<li>try running the example code here in your own project</li>
<li>take data from your own experiments, reformat by hand in a csv if
necessary and read into R</li>
<li>explore different data manipulations with base R and dplyr
functions</li>
<li>try comparing groups using simple statistical tests like
<code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test()</a></code> and <code><a href="https://rdrr.io/r/stats/wilcox.test.html" class="external-link">wilcox.test()</a></code>. Hint: you just
need to feed numeric vectors with your data into these functions.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brad Blaser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
