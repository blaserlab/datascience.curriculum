<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="datascience.curriculum">
<title>Week 1:  Setting Up • datascience.curriculum</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Week 1:  Setting Up">
<meta property="og:description" content="datascience.curriculum">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datascience.curriculum</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/week_1.html">Week 1:  Setting Up</a>
    <a class="dropdown-item" href="../articles/week_2.html">Week 2:  R Fundamentals</a>
    <a class="dropdown-item" href="../articles/week_3.html">Week 3:  Next Level R</a>
    <a class="dropdown-item" href="../articles/week_6.html">Week 6:  Packages</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Week 1:  Setting Up</h1>
            
      
      
      <div class="d-none name"><code>week_1.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This course will focus on what I believe are the essential skills
necessary for a laboratory-based scientist to use R and Rstudio in an
effective way. There are many other detailed resources out there for
you.</p>
<ul>
<li>
<a href="https://software-carpentry.org/lessons/previous/" class="external-link">Software
carpentry</a> has very good tutorials for R, python, git and working
with the command line.<br>
</li>
<li>
<a href="https://r4ds.had.co.nz/" class="external-link">R for data science</a> is a book
written by Hadley Wickham who wrote much of the software we use in
R</li>
<li>
<a href="https://moderndive.com/" class="external-link">Modern dive</a> is focused on
modeling if you are interested in more clinical data sets</li>
</ul>
<p>These and many others are good resources if you want to extend your
knowledge beyond what we cover here.</p>
<p>Learning R at times will seem like learning a foreign language. You
will make errors. <strong>Always remember that you will never be the
first person to encounter an error. Learn how to google the error
message and 99% of the time you will find your answer in the first 3
hits</strong>. This is how you learn.</p>
</div>
<div class="section level2">
<h2 id="r-and-rstudio">R and Rstudio<a class="anchor" aria-label="anchor" href="#r-and-rstudio"></a>
</h2>
<p>R is a statistical programming language. It is like the engine for an
automobile. RStudio is like the rest of the automobile. Rstudio is known
as an integrated development environment or IDE.</p>
<p>Rstudio provides two main ways of interacting with R: directly via
the R Console and via R scripts.</p>
<ul>
<li>
<p>R console: you type in commands and output is usually returned to
the console. The commands are logged in a history file if you really
need them, but this is inconvenient. A better option is to use
scripts.</p>
<p><strong>Warning and Error messages will appear in the console. Always
pay attention to what they are saying.</strong></p>
</li>
<li>
<p>R scripts: these are text files. When you run 1 or more lines,
Rstudio feeds them into the console and R follows the commands. This is
good because you always have a plain text record of what you did. So
when you build up a multi-step analysis it is easy to see how you got
the end product. Better than running the whole file is “sourcing” the
file. You can do this by typing Ctrl+Shift+S or clicking the “Source”
button in the upper right corner of the source pane (usually top-left)
in Rstudio. Why is this better? Let’s say you left an error in your
script. Maybe the presence of this error changes the final output you
are trying to produce. If you run all of the lines, R will notify you of
the error and then keep going. Easy to miss if this is the only error.
If you source the file, it will stop completely on errors so you don’t
end up with errors you aren’t aware of.</p>
<p><strong>You always want your programs to error in obvious ways so you
don’t carry on with incorrect data.</strong></p>
</li>
</ul>
<p>Rstudio provides a number of standard panes that display useful
information. We will review these in class or you can explore them on
your own.</p>
</div>
<div class="section level2">
<h2 id="packages">Packages<a class="anchor" aria-label="anchor" href="#packages"></a>
</h2>
<p>Packages are chunks of code and/or data that people have written and
made available to us to use. The main reason we use R is that there is a
large library of useful packages for the biological sciences that we can
build our work on, all of which are free to use.</p>
<p>Packages are most often stored and distributed as compressed binary
files via standard repositories. The two most common are <a href="https://cran.r-project.org/" class="external-link">CRAN</a> and <a href="https://www.bioconductor.org/" class="external-link">Bioconductor</a>. Packages can also
be distributed as source code (text based files), usually via
github.</p>
<p><strong>What happens when we “install” packages?</strong></p>
<p>R downloads the compressed file and then unpacks it in a library
directory on your computer or server. Then the functions and data are
available for you to use in your R project. A manual for each object in
the package is generated and can be viewed in the help panel. Access
these with <code>?&lt;object name&gt;</code> e.g. <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">?mean</a></code>.
Vignettes may also be available. Vignettes are tutorials that show you
how to use the functions in a package, often with example data. These
are best accessed by navigating through the package menu. Click on the
package name and near the top you will see any available vignettes.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the base function you use to install packages is...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"&lt;package name&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># install the renv package which is a more versatile installer </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"renv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># install the blaseRtemplates package which we will use in this lecture</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="st">"blaserlab/blaseRtemplates"</span><span class="op">)</span></span></code></pre></div>
<p>The base install function is most useful for official CRAN packages.
Using install from Renv will handle CRAN, bioconductor (prefix package
name with bioc::), github, and local sources pretty easily, so this is
the recommended approach.</p>
<p><strong>If you ever get an error that says a function or package is
unavailable, the first thing you want to do is make sure the package is
installed.</strong> You may not recognize what it is but it may be
required by another package you wish to use. This is called a
dependency.</p>
<p>Once you have installed a package its functions are available to be
called using the package name followed by 2 colons such as
<code>dplyr::filter(mtcars, cyl == 6)</code>. But this is not always the
best way to go.</p>
<p>To make all of the functions from a package available, you need to
run <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library("&lt;package name&gt;")</a></code>. This will attach all
of the functions from that package to your session.</p>
<p>Beware of attaching more packages than you actually need though
because there could be “namespace conflicts”. This happens when the same
term applies to two different functions from two different packages. R
picks one and goes with it without clearly indicating that it is doing
so. This is a common source of errors.</p>
<p>Later on we will see how to use the “conflicted” package to help warn
us of those errors before they cause a problem.</p>
</div>
<div class="section level2">
<h2 id="projects">Projects<a class="anchor" aria-label="anchor" href="#projects"></a>
</h2>
<p>A project is a self-contained group of files for your R data
analysis. This should align conceptually with your experiments. If you
have a set of single cell data and imaging data related to the same
scientific concept or paper then it can all go in the same project.</p>
<p>Projects automatically define their working directory to be the root
of the projects. That means you can reference any file in the root
directory by typing its name like so: “file.R”. If that file was one
directory down, it would be “directory/file.R”. There is almost no
reason ever to change this behavior.</p>
<p>You always want to be working in a project.</p>
<div class="section level3">
<h3 id="setting-up-a-project">Setting up a project<a class="anchor" aria-label="anchor" href="#setting-up-a-project"></a>
</h3>
<p>The best way to do this is through automated commands, rather than
through the program menus. This way the packages are set up in a
consisten manner, every time. Then when you have to revisit a project
after months and months, it is easy to navigate.</p>
<p>I wrote a small package, called “blaseRtemplates” to skeletonize my R
projects. You can also use the “usethis” package. The function
<code>blaseRtemplates::initialize_project()</code> is very similar to a
core function from usethis with a few extra features. Once the project
is initialized we switch over to “usethis” functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a project called rclass_example in your home directory</span></span>
<span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu">initialize_project</span><span class="op">(</span><span class="st">"~/rclass_example"</span><span class="op">)</span></span></code></pre></div>
<p>That function will create the skeletonized project, activate it and
restart your session within it.</p>
<p>The following lines are taken directly from one of files created,
“R/inititialization.R”:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># after running the initialization command, run these lines once to set up</span></span>
<span><span class="co"># your project in a consistent manner.</span></span>
<span><span class="co"># private github repos can be made public via the web interface</span></span>
<span></span>
<span><span class="co"># make a software license</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_mit_license</span><span class="op">(</span><span class="st">"&lt;your name here&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate a readme file to explain your work</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_readme_md</span><span class="op">(</span>open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># *** Only if developing a package ***</span></span>
<span><span class="co"># uncomment and run to generate a news file to document updates.</span></span>
<span><span class="co"># usethis::use_news_md()</span></span>
<span></span>
<span><span class="co"># initialize git</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_git</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># initialize github</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_github</span><span class="op">(</span>private <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">### Delete this file after initializing the project! ###</span></span></code></pre></div>
<p>After you run this script, you should delete it. See below for
setting up git and github for the first time.</p>
<p>Rstudio keeps track of your recent projectrs; you can open or close
projects by selecting from the dropdown menu in the top right of
Rstudio.</p>
<p>Be aware: any time you close or switch projects, the R session is
restarted and you will lose all objects not saved to disk, for example
your Global Environment.</p>
</div>
</div>
<div class="section level2">
<h2 id="global-environment">Global Environment<a class="anchor" aria-label="anchor" href="#global-environment"></a>
</h2>
<p>Environment is a very overloaded word in R, by which I mean it is
used to name too many separate concepts, and so is difficult to learn.
It is also referred to as “workspace” which is a much better term.</p>
<p>The global environment is like short-term memory. It holds values and
the names we give to these values in order to reference them. You may
think of the names as “variables”. Values can be data or code
(functions). Fundamentally, the global environment is a set of
name-value relationships.</p>
<p>R maintains many different environments concurrently. Each package
you attach with the <code>library</code> command gets its own
environment. The term “global” is even more confusing because it is not
really global in the sense that it encompasses all other environments.
Rather, it is the highest priority environment. If you enter a variable
name into R, it always looks in the global environment first and then
goes down the line until it hits the package:base environment. So if I
write a function in my R script called “mean” that for some reason
calculates the median of a set of numbers (not a great idea), R will
store that in the global environment. Later on if I ask R to use the
“mean” function, it will use the version from the global environment and
not the version from the base environment. It will calculate the median
instead of the mean in this case.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># produce a list of all environments</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/search.html" class="external-link">search</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] ".GlobalEnv"                     "package:datascience.curriculum"</span></span>
<span><span class="co">#&gt;  [3] "package:stats"                  "package:graphics"              </span></span>
<span><span class="co">#&gt;  [5] "package:grDevices"              "package:utils"                 </span></span>
<span><span class="co">#&gt;  [7] "package:datasets"               "package:methods"               </span></span>
<span><span class="co">#&gt;  [9] "Autoloads"                      "tools:callr"                   </span></span>
<span><span class="co">#&gt; [11] "package:base"</span></span></code></pre></div>
<p>Since the global environment gets wiped out every time you change
projects or restart R, you have to have a way to save what you want in
permanent storage and to recreate the rest as needed from code. We will
discuss this more when we talk about building packages.</p>
</div>
<div class="section level2">
<h2 id="renv-environment">Renv environment<a class="anchor" aria-label="anchor" href="#renv-environment"></a>
</h2>
<p>The Renv environment refers to a version-controlled set of R packages
that are specifically installed in an R project. It is analogous to a
conda environment in Python.</p>
<p>Why do you want to deal with another environment concept??</p>
<p>On occasion you will write an R script that depends on a specific
version of a package, but breaks if you were to update that package to a
newer version.</p>
<p>Or perhaps you want to share the project with a collaborator who has
a different set of packages installed on their system which may produce
errors or different results than the packages you are working with.</p>
<p>The way around this is to use Renv to control package versions. This
can cause some headaches but is generally worth the trouble.</p>
<p>What happens is Renv discovers all of the packages you use in your
code and copies or newly installs those pieces of software into a cache
directory on your system. This is usually difficult to find but this is
not a problem because Renv knows how to find it. Then Renv puts links to
the cache into your project, rather than the software itself. This keeps
the disk-space footprint of the project very small. Finally it maintains
a list, called a lockfile, of all the versions of all the packages being
used by the project. Each project will have its own library of Renv
links and its own lockfile.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># renv --------------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># set up the renv from scratch</span></span>
<span></span>
<span><span class="co"># renv::init(bioconductor = TRUE)</span></span>
<span></span>
<span><span class="co"># restore the renv from the lockfile</span></span>
<span></span>
<span><span class="co"># renv::restore()</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># package installation ----------------------------------------------------</span></span>
<span></span>
<span><span class="co"># # Try this first...it's faster:</span></span>
<span><span class="co"># blaseRtemplates::easy_install("&lt;package name&gt;", how = "link_from_cache")</span></span>
<span></span>
<span><span class="co"># # If you need a new package or an update, try this:</span></span>
<span><span class="co"># blaseRtemplates::easy_install("&lt;package name&gt;", how = "new_or_update")</span></span>
<span></span>
<span><span class="co"># # If you are installing from a "tarball", use this:</span></span>
<span><span class="co"># blaseRtemplates::easy_install("/path/to/tarball.tar.gz")</span></span>
<span></span>
<span><span class="co"># # use "bioc::&lt;package name&gt;" for bioconductor packages</span></span>
<span><span class="co"># # use "&lt;repo/package name&gt;" for github source packages</span></span>
<span></span>
<span><span class="co"># load and attach packages ------------------------------------------------</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"blaseRtemplates"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://conflicted.r-lib.org/" class="external-link">"conflicted"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org" class="external-link">"tidyverse"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/gert/" class="external-link">"gert"</a></span><span class="op">)</span></span></code></pre></div>
<ul>
<li>tip: When you run renv::init(), anything inside
<code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> will get installed into your project. So if you
have packages you use all the time, add them in there.</li>
</ul>
</div>
<div class="section level2">
<h2 id="project-organization">Project organization<a class="anchor" aria-label="anchor" href="#project-organization"></a>
</h2>
<p>I keep all of my R scripts in a directory called “R”. If you
initialized your project with
<code>blaseRtemplates::initialize_project()</code>, in addition to
<code>initialize.R</code>, you will have scripts labeled:</p>
<ul>
<li>
<code>dependencies.R</code>: use this for installing packages into
your renv environment and attaching them to your session</li>
<li>
<code>configs.R</code>: use this for setting graphical and aesthetic
parameters. I also use this for resolving function name conflicts.</li>
<li>
<code>local_configs.R</code>: only necessary if you are
collaborating via git (optional). If so, each collaborator may wish to
have personal configuration settings which are not shared. A common
example is for figure and table output to personal directories. Leave
blank if working on your own.</li>
<li>
<code>git_commands.R</code>: only necessary if you are using git
(recommended). The commands here will allow you to handle 99% of git
interactions via R in a scripted way.</li>
</ul>
<p>In addition to this, the main analysis scripts for the project will
go in the R folder and may go in subdirectories if there are a lot of
them. Other file types, such as *.Rmd, would go in their own folder
named Rmd/. This arrangement is very flexible for simple data analysis
projects; the rules become more strict when we build packages.</p>
</div>
<div class="section level2">
<h2 id="extra-credit-basic-git-operation-for-the-single-user">Extra credit: Basic git operation for the single user<a class="anchor" aria-label="anchor" href="#extra-credit-basic-git-operation-for-the-single-user"></a>
</h2>
<p>You want to try to use git and github. There is a vast array of
resources for you to read about git and troubleshoot issues. Briefly, it
is a program that tracks changes to text files. Since all of the code
you will write is text-based this is a great resource for you to keep
track of your progress on your work.</p>
<p>Git tracks changes to files in a group of files known as a
repository. The way we are using it here, your project is the
repository. Github is simply a website that hosts a copy of your
repository on the web. This is how you will share your work with journal
reviewers and editors and others.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Setting up git and github from R</span></span>
<span><span class="co"># You should only need to run these commands once.</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># make sure you have a github account</span></span>
<span><span class="co"># https://github.com/join</span></span>
<span></span>
<span><span class="co"># install git</span></span>
<span><span class="co">## Windows -&gt;  https://git-scm.com/download/win</span></span>
<span><span class="co">## Mac     -&gt;  https://git-scm.com/download/mac</span></span>
<span><span class="co">## Linux   -&gt;  https://git-scm.com/download/linux</span></span>
<span></span>
<span><span class="co"># configure git in Rstudio</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_git_config</span><span class="op">(</span>user.name <span class="op">=</span> <span class="st">"YourName"</span>, user.email <span class="op">=</span> <span class="st">"your@mail.com"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a personal access token at the github website</span></span>
<span><span class="co"># set the expiration date as desired</span></span>
<span><span class="co"># permissions should be set automatically</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">create_github_token</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run this and enter your token at the prompt</span></span>
<span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu">gitcreds_set</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># if you have trouble accessing github, you may need to edit the .Renviron file</span></span>
<span><span class="co"># this is the third usage of the term environment (sorry)</span></span>
<span><span class="co"># to edit this file, run</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">edit_r_environ</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># if there is a line there starting GITHUB_PAT=xxx,</span></span>
<span><span class="co"># it may be interfering with your credentials.  Delete it.</span></span>
<span><span class="co"># press enter to generate a new line and then save</span></span>
<span><span class="co"># restart R</span></span></code></pre></div>
<p>You may also want to run this line in the terminal to set the default
editor to “nano”.</p>
<p><code>git config --global core.editor "nano -w"</code></p>
<p>At some point, git will open a text editor and ask you to make some
edits. Unless you prefer Vim or emacs you should start with nano.</p>
<p>The necessary permissions should be set automatically by these
commands. By default, the token expires after 30 days, but you can
override this.</p>
<p>Assuming the commands above have run properly you should be ready to
use git and github. You can interact with git in at least 4 different
ways:</p>
<ul>
<li>via scripted commands on <code>R/git_commands.R</code>
</li>
<li>using the Git pane in Rstudio</li>
<li>using the terminal</li>
<li>using a third-party git client such as <a href="https://www.gitkraken.com/" class="external-link">git kraken</a> or <a href="https://www.sourcetreeapp.com/" class="external-link">sourcetree</a>
</li>
</ul>
<p>My recommended approach for new users is to use the scripted git
commands to control what is happening and to use the Git pane to monitor
the status of your repository. Just remember to hit the refresh icon if
things look strange in the Git panel.</p>
<p>At times you will need to use the terminal to fix conflicts, but this
should only happen if you are collaborating with git.</p>
<p>Many people use third-party apps, but these have their own learning
curve.</p>
<p>The basic process for using Git as a single user is this:</p>
<ul>
<li>save all of your open files</li>
<li>check the status of your repository so you know what files have
changed</li>
<li>add them to the Git index of files</li>
<li>commit them to create a save point for all of the files in your
project</li>
<li>push the commit to the remote repository (github)</li>
</ul>
<p>Here are the commands from <code>git_commands.R</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># basic everyday commands for all git users -------------------------------</span></span>
<span> </span>
<span><span class="fu">gert</span><span class="fu">::</span><span class="fu">git_status</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">gert</span><span class="fu">::</span><span class="fu">git_add</span><span class="op">(</span><span class="st">"*"</span><span class="op">)</span></span>
<span><span class="fu">gert</span><span class="fu">::</span><span class="fu">git_commit</span><span class="op">(</span><span class="st">"a short comment describing the changes made"</span><span class="op">)</span></span>
<span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu">git_push_all</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>That is it!</p>
<p>If you run into problems, the error messages are usually informative.
If you have trouble understanding an error or it isn’t helpful, just
google it.</p>
<p>One common use-case for git for the single user is to “un-delete”
files. You can do this as long as the files were previously committed.
To go back in time and recover the previously committed version, in the
terminal run <code>git log</code> to review your commit history. Add and
commit any outstanding changes to your repository as outlined above.
Then run <code>git checkout &lt;commit id&gt;</code> to rewind the state
of your repository to the desired commit. Copy the file(s) you want to
resurrect to a location external to the repository. Run
<code>git switch -</code> to go back to your latest commit. Make your
changes and go from there.</p>
<p>Here is a way that is even easier and doesn’t require using the
terminal: go to your github site for that repo. Click on clock icon
labled “commits” (which helpfully includes a “back in time” arrow). Then
select from the list of commits (versions). Click browse files and find
what you were looking for. You can even click on the raw version to copy
and paste directly back into R studio.</p>
<p>Here’s a more complicated situation most of us can relate to:</p>
<ul>
<li>You submit your beautiful manuscript to Journal A</li>
<li>Journal A bounces it right back to you</li>
<li>You reformat all of the figures for your paper in R and submit it to
Journal B</li>
<li>Journal B is more interested, and they send it out for review and 6
weeks later reject it.</li>
<li>You decide to submit to Journal C which has similar figure
formatting as does Journal A.</li>
<li>What do you do?</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run these commands to rewind to a prior "good" commit ----------------------</span></span>
<span></span>
<span><span class="co"># make sure git status is "clean" (all changes committed) before rewinding</span></span>
<span><span class="co"># gert::git_log() #find the id of the good commit</span></span>
<span><span class="co"># blaseRtemplates::git_rewind_to(commit = "&lt;good commit id&gt;")</span></span></code></pre></div>
<p>Hopefully you have a commit in your git log with the message
“submitted to Journal A”. You select that id (the long character string)
and provide it to the <code>blaseRtemplates::git_rewind_to()</code>
function. This function will generate a new commit that reverses all of
your changes from present, back to the indicated commit. Nothing is lost
or overwritten in the process of going back in time. The only thing that
happens is that inverse changes are applied. So if you need to go to
Journal D (which is formatted like Journal B) you can always do that
later.</p>
</div>
<div class="section level2">
<h2 id="exercises">Exercises<a class="anchor" aria-label="anchor" href="#exercises"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Use the code blocks from this vignette to make a new R project on
your system. Modify as necessary. If you have trouble with the git
commands omit them for now.</p></li>
<li><p>Explore the scripts in the R directory.</p></li>
<li><p>Try running the code in dependencies.R to install some
recommended packages.</p></li>
<li><p>Try adding the line
<code>blaseRtemplates::easy_install("blaserlab/blaseRtools", how = "new_or_update")</code>
and installing this package. Warning: it has a lot of dependencies and
may take a long time to finish.</p></li>
<li><p>Extra credit: save your work, then add, commit, and push to your
github site.</p></li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brad Blaser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
